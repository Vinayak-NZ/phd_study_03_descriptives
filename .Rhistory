ifelse(grepl("Moderate", waiting_room_exp$mobile_data), "Moderate",
"Strong")))
waiting_room_exp$mobile_data <- factor(waiting_room_exp$mobile_data,
levels = c("No connection",
"Weak",
"Moderate",
"Strong"))
View(waiting_room_exp)
# edit mobile devices response
waiting_room_exp$mobile_devices <-
ifelse(waiting_room_exp$mobile_devices %in% c("Yes ", "No "),
waiting_room_exp$mobile_devices,
"Not sure")
waiting_room_exp$mobile_devices <- factor(waiting_room_exp$mobile_devices,
levels = c("Not sure", "No", "Yes"))
View(waiting_room_exp)
waiting_room_exp <- read.csv("input/workshop_02_waiting_room_survey.csv", sep = ";")
# edit mobile devices response
waiting_room_exp$mobile_devices <-
ifelse(grepl("Yes", waiting_room_exp$mobile_devices), "Yes",
ifelse(grepl("No", waiting_room_exp$mobile_devices), "No",
"Not sure"))
waiting_room_exp$mobile_devices <- factor(waiting_room_exp$mobile_devices,
levels = c("Not sure", "No", "Yes"))
waiting_room_exp <- read.csv("input/workshop_02_waiting_room_survey.csv", sep = ";")
# edit mobile devices response
waiting_room_exp$mobile_devices <-
ifelse(grepl("Yes", waiting_room_exp$mobile_devices), "Yes",
ifelse(grepl("No", waiting_room_exp$mobile_devices), "No",
"Not sure"))
waiting_room_exp$mobile_devices <- factor(waiting_room_exp$mobile_devices,
levels = c("Not sure", "No", "Yes"))
# edit mobile data responses
waiting_room_exp$mobile_data <-
ifelse(grepl("Other", waiting_room_exp$mobile_data), "No connection",
ifelse(grepl("Weak", waiting_room_exp$mobile_data), "Weak",
ifelse(grepl("Moderate", waiting_room_exp$mobile_data), "Moderate",
ifelse(grepl("Strong", waiting_room_exp$mobile_data), "Strong",
"Not sure"))))
waiting_room_exp$mobile_data <- factor(waiting_room_exp$mobile_data,
levels = c("Not sure",
"No connection",
"Weak",
"Moderate",
"Strong"))
# aggregate mobile data responses and cell phone
mobile_devices_data <- as.data.frame(table(waiting_room_exp$mobile_devices,
waiting_room_exp$mobile_data))
mobile_devices_data$mobile_devices <- mobile_devices_data$Var1
mobile_devices_data$mobile_data <- mobile_devices_data$Var2
mobile_devices_data$Count <- mobile_devices_data$Freq
View(mobile_devices_data)
# plot heatmap of waiting room and waiting location
ggplot(mobile_devices_data,
aes(mobile_devices,
mobile_data,
fill = Count)) +
geom_tile(color = "#FFFFFF",
lwd = 1.5,
linetype = 1) +
geom_text(aes(label = Count), color = "#FFFFFF", size = 4) +
coord_fixed() +
scale_fill_gradient2(low = "#e18b22",
mid = "#46e7fd",
high = "#4739a2",
labels = c("0", "2", "4", "6", "8")) +
labs(title = paste0("Experiences of collaborators"),
subtitle = "Heatmap of clinic waiting environment and waiting location",
caption = "Data source: Patient preparedness tool") +
xlab("Does clinic have a waiting room?") +
ylab("Typical waiting location") +
guides(fill = guide_colourbar(title = "Count",
barwidth = 0.5,
barheight = 20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
panel.grid = element_line(color = "#e18b22", linewidth = 0.2, linetype = 2),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
# plot heatmap of waiting room and waiting location
ggplot(mobile_devices_data,
aes(mobile_devices,
mobile_data,
fill = Count)) +
geom_tile(color = "#FFFFFF",
lwd = 1.5,
linetype = 1) +
geom_text(aes(label = Count), color = "#FFFFFF", size = 4) +
coord_fixed() +
scale_fill_gradient2(low = "#e18b22",
mid = "#46e7fd",
high = "#4739a2") +
labs(title = paste0("Experiences of collaborators"),
subtitle = "Heatmap of clinic waiting environment and waiting location",
caption = "Data source: Patient preparedness tool") +
xlab("Does clinic have a waiting room?") +
ylab("Typical waiting location") +
guides(fill = guide_colourbar(title = "Count",
barwidth = 0.5,
barheight = 20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
panel.grid = element_line(color = "#e18b22", linewidth = 0.2, linetype = 2),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
# plot heatmap of waiting room and waiting location
ggplot(mobile_devices_data,
aes(mobile_devices,
mobile_data,
fill = Count)) +
geom_tile(color = "#FFFFFF",
lwd = 1.5,
linetype = 1) +
geom_text(aes(label = Count), color = "#FFFFFF", size = 4) +
coord_fixed() +
scale_fill_gradient2(low = "#e18b22",
mid = "#46e7fd",
high = "#4739a2") +
labs(title = paste0("Experiences of collaborators"),
subtitle = "Heatmap of mobile connection inside clinic",
caption = "Data source: Patient preparedness tool") +
xlab("Does clinic allow mobile phones inside?") +
ylab("Strength of mobile data connection inside clinic") +
guides(fill = guide_colourbar(title = "Count",
barwidth = 0.5,
barheight = 20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
panel.grid = element_line(color = "#e18b22", linewidth = 0.2, linetype = 2),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
# plot heatmap of waiting room and waiting location
ggplot(mobile_devices_data,
aes(mobile_devices,
mobile_data,
fill = Count)) +
geom_tile(color = "#FFFFFF",
lwd = 1.5,
linetype = 1) +
geom_text(aes(label = Count), color = "#FFFFFF", size = 4) +
coord_fixed() +
scale_fill_gradient2(low = "#e18b22",
mid = "#46e7fd",
high = "#4739a2") +
labs(title = paste0("Experiences of collaborators"),
subtitle = "Heatmap of mobile connection inside clinic",
caption = "Data source: Patient preparedness tool") +
xlab("Does clinic allow mobile phones inside?") +
ylab("Strength of mobile data /nconnection inside clinic") +
guides(fill = guide_colourbar(title = "Count",
barwidth = 0.5,
barheight = 20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
panel.grid = element_line(color = "#e18b22", linewidth = 0.2, linetype = 2),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
# plot heatmap of waiting room and waiting location
ggplot(mobile_devices_data,
aes(mobile_devices,
mobile_data,
fill = Count)) +
geom_tile(color = "#FFFFFF",
lwd = 1.5,
linetype = 1) +
geom_text(aes(label = Count), color = "#FFFFFF", size = 4) +
coord_fixed() +
scale_fill_gradient2(low = "#e18b22",
mid = "#46e7fd",
high = "#4739a2") +
labs(title = paste0("Experiences of collaborators"),
subtitle = "Heatmap of mobile connection inside clinic",
caption = "Data source: Patient preparedness tool") +
xlab("Does clinic allow mobile phones inside?") +
ylab("Strength of mobile data \nconnection inside clinic") +
guides(fill = guide_colourbar(title = "Count",
barwidth = 0.5,
barheight = 20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
panel.grid = element_line(color = "#e18b22", linewidth = 0.2, linetype = 2),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
# plot heatmap of waiting room and waiting location
ggplot(mobile_devices_data,
aes(mobile_devices,
mobile_data,
fill = Count)) +
geom_tile(color = "#FFFFFF",
lwd = 1.5,
linetype = 1) +
geom_text(aes(label = Count), color = "#FFFFFF", size = 4) +
coord_fixed() +
scale_fill_gradient2(low = "#e18b22",
mid = "#46e7fd",
high = "#4739a2") +
labs(title = paste0("Experiences of collaborators"),
subtitle = "Heatmap of mobile connection inside clinic",
caption = "Data source: Patient preparedness tool") +
xlab("Does clinic allow \nmobile phones to be used?") +
ylab("Strength of mobile data \nconnection inside clinic") +
guides(fill = guide_colourbar(title = "Count",
barwidth = 0.5,
barheight = 20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
panel.grid = element_line(color = "#e18b22", linewidth = 0.2, linetype = 2),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
source("R/00_load_package.R")
source("R/01_load_data.R")
source("R/02_data_edit.R")
source("R/03_data_extract.R")
source("R/03_data_extracts.R")
source("R/01_load_data.R")
source("R/02_data_edit.R")
source("R/03_data_extracts.R")
source("R/04_aggregate_data.R")
source("R/05_visualise_communication_survey.R")
source("R/05_visualise_communication_survey.R")
source("R/05_visualise_demographics.R")
source("R/05_visualise_communication_survey.R")
source("R/05_visualise_demographics.R")
## ---- visualise-demographics-sex
subset_data_sex <- demographics
subset_data_sex$sex <- ifelse(subset_data_sex$sex == "female", "Female",
ifelse(subset_data_sex$sex == "male", "Male",
"Diverse"))
subset_data_sex$count <- ifelse(subset_data_sex$sex == "Female", table(subset_data_sex$sex)["Female"],
ifelse(subset_data_sex$sex == "Male", table(subset_data_sex$sex)["Male"],
table(subset_data_sex$sex)["Diverse"]))
View(subset_data_sex)
socio_demo_sex <-
ggplot(data = subset_data_sex, aes(x = reorder(sex, count), fill = sex)) +
geom_bar(key_glyph = draw_key_blank) +
scale_fill_manual(values = c("#46e7fd", "#e18b22", "#4739a2")) +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Bar chart of sex distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Sex") +
ylab("Count") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"),
legend.position = "none")
ggsave("output/socio_demo_sex.png",
plot = socio_demo_sex)
## ---- visualise-demographics-major
subset_data_major <- demographics
subset_data_major$major <- ifelse(subset_data_major$major == "computer science", "CS",
ifelse(subset_data_major$major == "chemistry and biotechnology", "CB",
ifelse(subset_data_major$major == "integrated social and cognitive psychology", "ISCP",
ifelse(subset_data_major$major == "medicinal chemistry and chemical biology", "MCCB",
ifelse(subset_data_major$major == "international business administration", "IBA",
ifelse(subset_data_major$major == "global economics and management", "GEM",
"ISCP"))))))
subset_data_major$count <- ifelse(subset_data_major$major == "CS", table(subset_data_major$major)["CS"],
ifelse(subset_data_major$major == "CB", table(subset_data_major$major)["CB"],
ifelse(subset_data_major$major == "ISCP", table(subset_data_major$major)["ISCP"],
ifelse(subset_data_major$major == "MCCB", table(subset_data_major$major)["MCCB"],
ifelse(subset_data_major$major == "IBA", table(subset_data_major$major)["IBA"],
table(subset_data_major$major)["GEM"])))))
labels.major <- c(CS = 'CS = Computer science',
CB = 'CB = Chemistry and biotechnology',
ISCP = 'ISCP = Integrated social and cognitive psychology',
MCCB = 'MCCB = Medicinal chemistry and chemical biology',
IBA = 'IBA = International business administration',
GEM = 'GEM = Global economics and management')
View(subset_data_major)
socio_demo_major <-
ggplot(data = subset_data_major, aes(reorder(x = major, count), fill = major)) +
geom_bar(key_glyph = draw_key_blank) +
scale_fill_manual(values = rep("#4739a2", length(labels.major)), labels = labels.major) +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Bar chart of major enrolled in",
caption = "Data source: Patient preparedness Tool",
fill = "Major") +
xlab("Major") +
ylab("Count") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"),
legend.key = element_rect(fill = NA),
legend.key.width = unit(0, "pt"),
legend.spacing.x = unit(0, "pt"))
ggsave("output/socio_demo_major.png",
plot = socio_demo_major)
source("R/00_load_package.R")
source("R/01_load_data.R")
source("R/02_data_edit.R")
source("R/03_data_extracts.R")
source("R/04_aggregate_data.R")
source("R/05_visualise_communication_survey.R")
source("R/05_visualise_demographics.R")
source("R/00_load_package.R")
source("R/01_load_data.R")
source("R/02_data_edit.R")
source("R/03_data_extracts.R")
source("R/04_aggregate_data.R")
source("R/05_visualise_communication_survey.R")
source("R/05_visualise_demographics.R")
## ---- visualise-demographics-age
subset_data_age <- demographics[demographics$age > 18, ]
subset_data_age <- subset_data_age[!is.na(subset_data_age$age), ]
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 7, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(18, 25) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
ggsave("output/socio_demo_age.png",
plot = socio_demo_age)
## ---- visualise-demographics-age
subset_data_age <- demographics[demographics$age > 18, ]
subset_data_age <- subset_data_age[!is.na(subset_data_age$age), ]
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(stat = "count", fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(stat = "count", fill = "#4739a2") +
stat_count(binwidth = 1) +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 7, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(18, 25) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
ggsave("output/socio_demo_age.png",
plot = socio_demo_age)
socio_demo_age
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 7, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
View(subset_data_age)
## ---- visualise-demographics-age
subset_data_age <- demographics[demographics$age > 18, ]
subset_data_age <- subset_data_age[!is.na(subset_data_age$age), ]
subset_data_age$age <- as.numeric(subset_data_age$age)
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 7, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
## ---- visualise-demographics-age
subset_data_age <- demographics[demographics$age > 18, ]
subset_data_age <- subset_data_age[!is.na(subset_data_age$age), ]
subset_data_age$age <- as.numeric(subset_data_age$age)
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 5, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(18, 25) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 5, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(18, 30) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 10, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(18, 30) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 15, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(18, 30) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
socio_demo_age <-
ggplot(subset_data_age, aes(x = age)) +
geom_histogram(bins = 15, fill = "#4739a2") +
labs(title = paste0("Characteristics of collaborators"),
subtitle = "Histogram of age distribution in workshop",
caption = "Data source: Patient preparedness tool") +
xlab("Age") +
ylab("Count") +
xlim(16, 30) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic")
)
socio_demo_age
source("R/00_load_package.R")
source("R/01_load_data.R")
source("R/02_data_edit.R")
source("R/03_data_extracts.R")
source("R/04_aggregate_data.R")
source("R/05_visualise_communication_survey.R")
source("R/05_visualise_demographics.R")
source("R/05_visualise_health_conditions.R")
source("R/05_visualise_regions.R")
source("R/05_visualise_regions.R")
source("R/05_visualise_waiting_room.R")
